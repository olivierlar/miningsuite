#summary Overall description of the architecture of PatMinr module.

= _PatMinr_ module =

 Overall description of the architecture

== Classes ==

`pat.occurrence`: PatOccurrence

to be continued…


== How it works ==

=== `mus.minr`:`Process_notes`===

Each note:

 * `mus.minr`:`Process` note


=== `mus.minr`:`Process` note ===

Each previous note syntagmatically leading to the note:

 * `pat.syntagm` previous note -> current note

 * Create a `pat.occurrence` of the elementary note pattern and call `memorize` ø -> syntagm (cf. below)

=== `pat.syntagm` previous -> current ===

Constructs a syntagmatic relation between previous and current note.

Tries to extend all the pattern occurrences (including cycles) ending at the previous note with the new syntagmatic relation, with the following order:

 * First, extends cycles: Call `pat.occurrence.memorize` cycle -> syntagm with generalization.

 * Then, extends the set of pattern occurrences ordered in decreasing order of specificity, by first calling `pat.occurrence.memorize` occurrence -> syntagm on each of them without generalization, and then calling once again `pat.occurrence.memorize` occurrence -> syntagm on each of them but this time with generalization.

=== `pat.occurrence.memorize` occurrence -> syntagm, with or without generalisation ===

 * Calls `pat.pattern.remember` (occurrence pattern, occurrence -> syntagm) to check if occurrence -> syntagm can be recognised as a known pattern extension of the occurrence pattern.
 * Also calls `pat.pattern.remember` for all patterns more specific than the occurrence pattern.
 * If there is generalisation, also calls `pat.pattern.remember` for all patterns more general than the occurrence pattern.
 * Calls `pat.memoparam.learn` (occurrence pattern memory, occurrence -> syntagm) to check if  occurrence -> syntagm can be identified with a previously memorised extension, leading to a new pattern extension.
 * If there is generalisation, also calls `pat.memoparam.learn` for all patterns more general than the occurrence pattern.